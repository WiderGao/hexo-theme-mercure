<script id="dsq-count-scr" src="//<%- theme.comments.disqus.shortname %>.disqus.com/count.js" async></script>
<div id="disqus_thread"></div>
<script type="text/javascript" id="disqus-thread-script">
  var disqus_config = function () {
    this.page.url = '<%- decodeURI(page.permalink) %>'; // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = '<%- decodeURI(page.permalink) %>'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
  };
  (function () {
    function loadComments() {
      // here we will only load the disqus <script> if not already loaded
      if (!window.DISQUS) {
        (function () {
          var d = document;
          var s = d.createElement('script');
          s.src = '//<%- theme.comments.disqus.shortname %>.disqus.com/embed.js';
          s.setAttribute('data-timestamp', + new Date());
          (d.head || d.body).appendChild(s);
        })();
      }
      // if disqus <script> is already loaded, we just reset disqus the right way
      // see https://help.disqus.com/developer/using-disqus-on-ajax-sites
      else {
        DISQUS.reset({
          reload: true,
          config: function () {
            this.page.identifier = disqus_identifier
            this.page.url = disqus_url
          }
        });
      }
    }
    loadComments();
  })();
</script>

<style>
  /* 隐藏disqus的广告 */
  #disqus_thread iframe {
    display: none;
  }

  #disqus_thread iframe:last-child {
    display: block;
  }
</style>
