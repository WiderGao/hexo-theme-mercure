<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">

<div id="gitalk-container"></div>

<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js" async></script>
<script>
(function() {
    function loadComments() {
        const gitalk = new Gitalk({
            clientID: '<%= theme.comments.gitalk.clientID %>',
            clientSecret: '<%= theme.comments.gitalk.clientSecret %>',
            repo: '<%= theme.comments.gitalk.repo %>',      // The repository of store comments,
            owner: '<%= theme.comments.gitalk.owner %>',
            admin: ['<%= theme.comments.gitalk.admin %>'],
            id: decodeURIComponent(location.pathname),      // Ensure uniqueness and length less than 50
            distractionFreeMode: false  // Facebook-like distraction free mode
        });
        gitalk.render('gitalk-container');
    }
    var commentLoadCounter = 0;
    var commentloadTimer = setInterval(function() {
        if(window.Gitalk) {
            loadComments();
            clearInterval(commentloadTimer);
        }
        if(commentLoadCounter > 10000) {
            clearInterval(commentloadTimer);
        }
        commentLoadCounter += 500;
    }, 500);
})();
</script>

<style>
    .gt-container .gt-meta {
        margin-top: 0;
        padding-top: 0;
    }
</style>